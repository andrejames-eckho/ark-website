# Supabase Setup Instructions

## 1. Create Supabase Project

1. Go to [supabase.com](https://supabase.com)
2. Click "Start your project" 
3. Sign up/login with your GitHub account
4. Create a new organization (or use existing)
5. Create a new project:
   - **Project Name**: `ark-equipment` (or your preferred name)
   - **Database Password**: Generate a strong password and save it
   - **Region**: Choose the closest region to your users

## 2. Get Project Credentials

Once your project is created:

1. Go to **Project Settings** â†’ **API**
2. Copy the **Project URL** and **anon public** key
3. Add these to your `.env` file:
   ```env
   VITE_SUPABASE_URL=your_project_url_here
   VITE_SUPABASE_ANON_KEY=your_anon_key_here
   ```

## 3. Create Database Tables

Go to **SQL Editor** â†’ **New query** and run this SQL:

```sql
-- Categories table
CREATE TABLE categories (
  id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  name TEXT NOT NULL,
  icon_name TEXT,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- Equipment table with image support
CREATE TABLE equipment (
  id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  name TEXT NOT NULL,
  category_id BIGINT REFERENCES categories(id),
  image_url TEXT,
  description TEXT,
  specifications JSONB,
  status TEXT DEFAULT 'available' CHECK (status IN ('available', 'unavailable', 'maintenance')),
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- Enable RLS (Row Level Security)
ALTER TABLE equipment ENABLE ROW LEVEL SECURITY;
ALTER TABLE categories ENABLE ROW LEVEL SECURITY;

-- Public read policies
CREATE POLICY "Public read access" ON equipment FOR SELECT USING (true);
CREATE POLICY "Public read access" ON categories FOR SELECT USING (true);
```

## 4. Create Storage Bucket for Images

1. Go to **Storage** â†’ **Policies**
2. Click **Create bucket**:
   - **Name**: `equipment-images`
   - **Public bucket**: âœ… Yes
3. Create a policy for public access:
   - Go to **Policies** tab
   - Click **New Policy**
   - Select **For full customization**
   - Policy name: `Public Access`
   - ALLOW operations: `SELECT`, `INSERT`, `UPDATE`
   - Target roles: `anon`, `authenticated`
   - Policy definition: `bucket_id = 'equipment-images'`

**OR use SQL instead:**

```sql
-- Create storage policy for public access
CREATE POLICY "Public Access" ON storage.objects
FOR SELECT USING (bucket_id = 'equipment-images');

CREATE POLICY "Public Upload" ON storage.objects
FOR INSERT WITH CHECK (bucket_id = 'equipment-images');

CREATE POLICY "Public Update" ON storage.objects
FOR UPDATE USING (bucket_id = 'equipment-images');
```

## 5. Add Sample Data

Run this SQL to add sample categories and equipment:

```sql
-- Insert sample categories
INSERT INTO categories (name, icon_name) VALUES
('Audio', 'Speaker'),
('Lighting', 'Lightbulb'),
('Video', 'Video'),
('Rigging', 'Rigging'),
('Monitors', 'Monitor'),
('Projection', 'Video');

-- Insert sample equipment
INSERT INTO equipment (name, category_id, description, status) VALUES
('L-Acoustics K2', 1, 'Premium line array speaker system', 'available'),
('MA Lighting grandMA3', 2, 'Professional lighting console', 'available'),
('Shure Axient Digital', 1, 'Digital wireless microphone system', 'available'),
('Robe MegaPointe', 2, 'High-power moving head light', 'available'),
('Christie M 4K25', 6, '4K laser projector', 'available'),
('Blackmagic Constellation', 3, 'Live production switcher', 'available');
```

## 6. Upload Sample Images (Optional)

1. Go to **Storage** â†’ **equipment-images**
2. Upload some equipment images
3. Copy the public URLs and update the `image_url` field in your equipment records

## 7. Test the Integration

1. Start your development server: `npm run dev`
2. Navigate to `/equipment` - you should see the equipment from Supabase
3. Open the quote form - equipment options should load from the database

## 8. Grant Access to Third-Party Users

To let others manage equipment:

1. Go to **Project Settings** â†’ **Team**
2. Click **Invite** 
3. Enter their email address
4. Assign role: **Developer** (allows table editing)
5. They can now:
   - Edit equipment in the **Table Editor**
   - Upload images to **Storage**
   - Manage categories

## Important Notes

- **Free Tier Limits**: 1GB storage, 2GB bandwidth/month
- **Security**: Only public read access is enabled for the website
- **Backups**: Supabase automatically backs up your data
- **Scaling**: Easy to upgrade plans as your inventory grows

Your equipment management system is now ready! ðŸŽ‰
